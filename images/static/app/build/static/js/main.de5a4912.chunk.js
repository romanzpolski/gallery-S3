(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e){e.exports={apiHost:"http://localhost"}},31:function(e,t,a){e.exports=a(50)},36:function(e,t,a){},39:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(15),i=a.n(l),s=(a(36),a(25),a(8)),c=a(9),r=a(12),m=a(10),u=a(13),h=(a(39),a(53)),p=a(52),g=a(51),d=a(16),f=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).getData=function(e){fetch("http://localhost/api/image/getData/"+e).then(function(e){return e.json()}).then(function(e){a.setState({views:e.data.views,downloads:e.data.downloads})}).catch(function(e){console.log("Fetch get image data failed",e)})},a.state={views:a.props.views,downloads:a.props.downloads},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.interval=setInterval(function(){},1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidUpdate",value:function(e){this.props.id!==e.id&&(this.setState({views:this.props.views,downloads:this.props.downloads}),this.getData(this.props.id))}},{key:"render",value:function(){return o.a.createElement(g.a,{sm:"4"},o.a.createElement("br",null),o.a.createElement("h6",{className:"text-center"},this.props.name),o.a.createElement("img",{"data-id":this.props.id,onClick:this.props.handleClick,className:"img-fluid",src:this.props.path,alt:this.props.name}),o.a.createElement(p.a,null,o.a.createElement(g.a,{xs:"3"},o.a.createElement(d.a,{icon:"eye"})),o.a.createElement(g.a,{xs:"9",className:"text-right"},this.state.views)),o.a.createElement(p.a,null,o.a.createElement(g.a,{xs:"3"},o.a.createElement(d.a,{icon:"download"})),o.a.createElement(g.a,{xs:"9",className:"text-right"},o.a.createElement("span",null,this.state.downloads))))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){a.props.handleClick(e)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(h.a,null,o.a.createElement(p.a,null,this.props.images.map(function(t,a){return o.a.createElement(f,Object.assign({key:a},t,{handleClick:e.props.handleClick}))})))}}]),t}(n.Component),b=a(54),v=a(55),w=a(56),k=a(57),j=a(58),C=a(59),O=a(17),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).submitForm=function(e){e.preventDefault(),a.fileUpload()},a.handleNameChange=function(e){a.state.name=e.target.value},a.handleFileChange=function(e){a.state.file=e.target.files[0]},a.fileUpload=function(){a.setState({loading:!0});var e=new FormData;e.append("image",a.state.file),e.append("name",a.state.name),fetch("http://localhost/api/image/upload",{method:"POST",body:e}).then(function(e){return e.ok&&a.props.refresh(),e.json()}).then(function(e){a.setState({loading:!1,msg:e.image,alertVisible:!0})}).catch(function(e){console.log("Fetch Error",e)})},a.onDismissAlert=function(){a.setState({alertVisible:!1})},a.state={name:"",file:{},loading:!1,alertVisible:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,this.state.loading?o.a.createElement("div",{className:"text-center",style:{fontSize:"80px"}},o.a.createElement(d.a,{icon:O.a,spin:!0})):o.a.createElement("div",null,o.a.createElement(b.a,{color:"info",isOpen:this.state.alertVisible,toggle:this.onDismissAlert},this.state.msg),o.a.createElement(v.a,{className:"upload-form",onSubmit:this.submitForm},o.a.createElement(w.a,null,o.a.createElement(k.a,{for:"name"},"Name"),o.a.createElement(j.a,{onChange:this.handleNameChange,type:"text",name:"name",id:"name",placeholder:"Name"})),o.a.createElement(w.a,null,o.a.createElement(k.a,{for:"image"},"File"),o.a.createElement(j.a,{onChange:this.handleFileChange,type:"file",name:"image",id:"image"})),o.a.createElement(C.a,{className:"success"},"Upload"),o.a.createElement("br",null),o.a.createElement("br",null))))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).getPages=function(){for(var e=[],t=1;t<=a.state.pages;t++)e.push(t);return e.map(function(e){return e-1==a.state.page?o.a.createElement(C.a,{active:!0,color:"success",onClick:function(){return a.props.paginationClick(e-1)},key:e}," ",e," "):o.a.createElement(C.a,{color:"success",onClick:function(){return a.props.paginationClick(e-1)},key:e}," ",e," ")})},a.state={page:a.props.page,total:a.props.total,pages:Math.ceil(a.props.total/9)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.setState({page:this.props.page,total:this.props.total,pages:Math.ceil(this.props.total/9)})}},{key:"render",value:function(){return o.a.createElement(h.a,{className:"text-right"},o.a.createElement("br",null),o.a.createElement("br",null),this.getPages(),o.a.createElement("br",null),o.a.createElement("br",null))}}]),t}(o.a.Component),N=a(63),x=a(60),D=a(61),S=a(62),F=a(18),M=a(22);F.b.add(O.c),F.b.add(O.b);var U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){var t=e.target.dataset.id;a.viewImage(t)},a.toggleModal=function(){a.setState({modal:!a.state.modal})},a.getImages=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;fetch(M.apiHost+"/api/images/"+e).then(function(e){return e.json()}).then(function(e){a.setState({images:e.data,total:e.total})}).catch(function(e){console.log("Fetch Images Error",e)})},a.downloadImage=function(){fetch(M.apiHost+"/api/image/download/"+a.state.modalImage.id).then(function(e){return e.json()}).then(function(e){window.location=e.data,a.toggleModal()}).catch(function(e){console.log("Fetch Download Image Error",e)})},a.viewImage=function(e){fetch(M.apiHost+"/api/image/view/"+e).then(function(e){return e.json()}).then(function(e){a.setState({modalImage:e.data}),a.toggleModal()}).catch(function(e){console.log("Fetch View Image Error",e)})},a.refresh=function(){a.getImages(a.state.page)},a.paginationClick=function(e){a.state.page=e,a.refresh()},a.state={images:[],modal:!1,page:0,total:0,imageId:!1,modalImage:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.getImages(0)}},{key:"render",value:function(){return[o.a.createElement(y,{refresh:this.refresh}),o.a.createElement(E,{images:this.state.images,handleClick:this.handleClick}),o.a.createElement(I,{page:this.state.page,paginationClick:this.paginationClick,total:this.state.total}),o.a.createElement(N.a,{isOpen:this.state.modal,toggle:this.toggleModal,className:"lg"},o.a.createElement(x.a,{toggle:this.toggle},this.state.modalImage.name),o.a.createElement(D.a,null,o.a.createElement("img",{className:"img-fluid",src:this.state.modalImage.imagePath})),o.a.createElement(S.a,null,o.a.createElement(C.a,{color:"primary",onClick:this.downloadImage},"Download Image"),o.a.createElement(C.a,{color:"secondary",onClick:this.toggleModal},"Cancel")))]}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.de5a4912.chunk.js.map